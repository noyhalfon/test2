{"version":3,"sources":["../../../src/models/user-model.js"],"names":["Schema","CustomerSchema","id","Number","userName","String","firstName","lastName","password","address","email","age","phoneNumber","img","birthday","clubs","type","Types","ObjectId","ref","credits","receipts","pre","next","user","isModified","encrypt","then","value","index","runCustomerValidations","model"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;AACA;;;;;;AAEA,IAAMA,SAAS,mBAASA,MAAxB;;AAEA,IAAMC,iBAAiB,IAAID,MAAJ,CAAW;AAC9BE,QAAIC,MAD0B;AAE9BC,cAASC,MAFqB;AAG9BC,eAAWD,MAHmB;AAI9BE,cAAUF,MAJoB;AAK9BG,cAAUH,MALoB;AAM9BI,aAASJ,MANqB;AAO9BK,WAAOL,MAPuB;AAQ9BM,SAAKR,MARyB;AAS9BS,iBAAaP,MATiB;AAU9BQ,SAAMR,MAVwB;AAW9BS,cAAUT,MAXoB;AAY9BU,WAAO,CAAC,EAACC,MAAO,mBAAShB,MAAT,CAAgBiB,KAAhB,CAAsBC,QAA9B,EAAwCC,KAAM,MAA9C,EAAD,CAZuB;AAa9BC,aAAS,2BAbqB;AAc9BC,cAAU,6BAdoB,EAAX,CAAvB;;AAiBApB,eAAeqB,GAAf,CAAmB,MAAnB,EAA2B,UAASC,IAAT,EAAe;AACtC,QAAIC,OAAO,IAAX;;AAEA,QAAI,CAACA,KAAKC,UAAL,CAAgB,UAAhB,CAAL,EACI,OAAOF,MAAP;;AAEJ,qBAAOG,OAAP,CAAeF,KAAKhB,QAApB,EAA8BmB,IAA9B,CAAmC,UAACC,KAAD,EAAW;AAC1CJ,aAAKhB,QAAL,GAAgBoB,KAAhB;AACAL;AACH,KAHD;AAIH,CAVD;;AAYAtB,eAAe4B,KAAf,CAAqB,EAAC3B,IAAI,CAAL,EAArB;AACA,gCAAwB4B,sBAAxB,CAA+C7B,cAA/C;;QAESA,c,GAAAA,c;kBACM,mBAAS8B,KAAT,CAAe,UAAf,EAA2B9B,cAA3B,C","file":"user-model.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport Crypto from '../services/crypto.service';\r\nimport { ClubSchema } from './club-model';\r\nimport Club from './club-model';\r\nimport { CreditSchema } from './credit-model';\r\nimport { ReceiptSchema } from './receipt-model';\r\nimport CustomerSchemaValidator from './validations/user-schema-validations';\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst CustomerSchema = new Schema({\r\n    id: Number,\r\n    userName:String,\r\n    firstName: String,\r\n    lastName: String,\r\n    password: String,\r\n    address: String,\r\n    email: String,\r\n    age: Number,\r\n    phoneNumber: String,\r\n    img : String,\r\n    birthday: String,\r\n    clubs: [{type : mongoose.Schema.Types.ObjectId, ref : 'Club'}],\r\n    credits: [CreditSchema],\r\n    receipts: [ReceiptSchema]}\r\n    );\r\n\r\nCustomerSchema.pre('save', function(next) {\r\n    var user = this;\r\n\r\n    if (!user.isModified('password'))\r\n        return next();\r\n\r\n    Crypto.encrypt(user.password).then((value) => {\r\n        user.password = value;\r\n        next();\r\n    });\r\n});\r\n\r\nCustomerSchema.index({id: 1});\r\nCustomerSchemaValidator.runCustomerValidations(CustomerSchema);\r\n\r\nexport { CustomerSchema };\r\nexport default mongoose.model('Customer', CustomerSchema);\r\n"]}